/**
 * @file src/Program.hpp
 * @author Adam 'Adanos' GÄ…sior
 * Used library: SFML
 */

#pragma once

#include <SFML/Graphics.hpp>

#include "program/Settings.hpp"
#include "program/Resources.hpp"
#include "program/Game.hpp"

namespace rr
{

    class Game;

    class Program
    {
    private: sf::Event        m_event;
             sf::RenderWindow m_window;

      static sf::String       m_version;

             Game*            m_game;

             ////////////////////////////////////////////////////////////////////////
             /// \brief Runs the game's main loop.
             ////////////////////////////////////////////////////////////////////////
             void mainLoop();

             ////////////////////////////////////////////////////////////////////////
             /// \brief Handles the window events.
             ////////////////////////////////////////////////////////////////////////
             void handleEvents();

             ////////////////////////////////////////////////////////////////////////
             /// \brief Updates the game's state.
             ////////////////////////////////////////////////////////////////////////
             void update(sf::Time&);

             ////////////////////////////////////////////////////////////////////////
             /// \brief Draws the game's components.
             ////////////////////////////////////////////////////////////////////////
             void draw();

    public:  ////////////////////////////////////////////////////////////////////////
             /// \brief Regular constructor.
             ////////////////////////////////////////////////////////////////////////
             Program();

             ////////////////////////////////////////////////////////////////////////
             /// \brief Destructor.
             ////////////////////////////////////////////////////////////////////////
            ~Program();

             ////////////////////////////////////////////////////////////////////////
             /// \brief Loads all the resources, settings and dictionary.
             ////////////////////////////////////////////////////////////////////////
             bool loadResources();

             ////////////////////////////////////////////////////////////////////////
             /// \brief Runs the game.
             ////////////////////////////////////////////////////////////////////////
             void runGame();

             ////////////////////////////////////////////////////////////////////////
             /// \brief Returns the pointer to the game object.
             ///
             /// \return an instance of Game class
             ////////////////////////////////////////////////////////////////////////
             Game* getGame() const { return m_game; }

             ////////////////////////////////////////////////////////////////////////
             /// \brief Returns the program version.
             ///
             /// \return the program version as a string
             ////////////////////////////////////////////////////////////////////////
      static sf::String getVersion() { return m_version; }
    };

}
